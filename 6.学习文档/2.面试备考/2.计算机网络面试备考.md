# 计算机网络面试备考

## 1.网络通讯中的时延包括哪些，分别是怎么引起的，占比最大的是什么？

* **时延**

  * 时延

    * 首先要明确的是时延的概念，时延到底是个什么东西。**时延是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。它是计算机网络的性能指标之一，网络中的时延包括发送时延（传输时延）、传播时延、处理时延、排队时延。**

  * **发送（传输）时延**： 

    * **发送时延是主机或路由器发送数据帧所需要的时间，** 也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需要的时间。发送时延的计算公式为：

    ​        **发送时延 = 数据帧长度（bit）/ 发送速率（bit/s）**

  * **传播时延**：

    * 传播时延是电磁波在信道中传播一定的距离需要花费的时间。传播时延的计算公式的：

    ​        **传播时延 = 信道长度（m）/ 电磁波在信道上的传播速率（m/s）**

    ​		发送时延与传播时延有本质上的差别。**发送时延**发生在机器内部的发送器中（一般是发生在网络适配器中），**与传播信道的长度无关。** 而**传播时延**发生在机器外部的传播信道媒体上，**与信号的发送速率无关。传播信道长度越长，传播时延就越大**

  - **处理时延**：
    * 主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等，这就产生了**处理时延**。
  - **排队时延**：
    * 分组通过网络传输时，要经过很多路由器。分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中 排队等待转发。这两个因素就造成了**排队时延** 。

  #### 总结

  > 时延是指数据包第一个比特进入路由器到最后一比特从路由器输出的时间间隔。在测试中通常使用测试仪表发出测试包到收到数据包的时间间隔。时延与数据包长相关，通常在路由器端口吞吐量范围内测试，超过吞吐量测试该指标没有意义。

  - 一般，[发送时延](https://www.baidu.com/s?wd=发送时延&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)与[传播时延](https://www.baidu.com/s?wd=传播时延&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)是我们主要考虑的。对于报文长度较大的情况，发送时延是主要矛盾；报文长度较小的情况，传播时延是主要矛盾。
  - 而整个网络的利用率则是全网络的信道利用率的加权平均值。（权是指权重，比重） 利用率并不是越高越好，当利用率达到50%以上，则网络中的排队时延会迅速增加，以至于可能产生数据拥塞。

## 2.请你描述`TCP/IP`五层模型。

TCP/IP是一组协议的代名词，它包括许多协议，组成了TCP/IP协议簇。它是把OSI七层模型简化成了五层模型。每一层都呼叫它的下一层所提供的网络来完成自己的需求。

* **TCP/IP五层模型**

  > 如果是四层模型数据链路层和物理层在一层网络接口层

  * 物理层：
    通过媒介传输比特,负责确定光电信号传递方式。传输单位为bit，物理层的能力决定了最大传输速率、传输距离,集线器工作在物理层。以太网协议。

  * 数据链路层：将比特组装成帧和点到点(设备之间)的传递,传输单位为帧,主要包括的协议为MAC VLAN,交换机

  * 网络层：负责数据包从源到宿的传递和网际互连，传输单位为包,主要包括的协议为IP ARP ICMP ,

  * 传输层：提供端到端（主机之间）的可靠报文传递和错误恢复，传输单位为报文,主要包括的协议为TCP UDP

  * 应用层：允许访问OSI环境的手段,负责应用程序之间的沟通。传输单位为APDU。网络编程主要针对的就是应用层。HTTP DNS SMTP

  传输层和网络层的封装在操作系统完成。应用层的封装在应用程序中完成。
  数据链路层和物理层的封装在设备驱动程序与网络接口中完成。

* **OSI 七层参考模型**

  | 参考模型   | 各层解释                     | 对应设备                   | 典型协议                | 协议数据单元            |
  | ---------- | ---------------------------- | -------------------------- | ----------------------- | ----------------------- |
  | 应用层     | 为应用程序提供服务           | 计算机                     | DHCP、DNS               | 报文message             |
  | 表示层     | 数据格式转换、数据加密       | 计算机                     | Telnet、SNMP            | 报文message             |
  | 会话层     | 建立、管理、维护会话         | 计算机                     | SMTP、SSH               | 报文message             |
  | 传输层     | 建立、管理、维护端到端的连接 | 进程和端口                 | TCP、UDP                | 报文段segment用户数据报 |
  | 网络层     | IP选址与路由选择             | 路由器、防火墙、多层交换机 | IP、ICMP、ARP           | IP数据报（分组）        |
  | 数据链路层 | 提供介质访问和链路管理       | 网卡、网桥、交换机         | PPP、Ethernet           | 帧frame                 |
  | 物理层     | 物理层                       | 中继器、集成器、网线       | IEEE 802. [1A, 2. . 11] | 比特bit                 |

### 3.交换机和路由器有什么区别？

* **工作层次不同：**
  交换机主要工作在数据链路层（第二层）
  路由器工作在网络层（第三层）。

* **转发依据不同：**
  交换机转发所依据的对象时：MAC地址（物理地址）,不能处理TCP/IP协议。
  路由转发所依据的对象是：IP地址（网络地址）,可以处理TCP/IP协议。

  > IP地址决定最终数据要到达某一台主机，而MAC地址是决定下一跳将要交给哪一台设备（一般是交换机或者路由器），IP地址是软件实现的，可以描述主机所在的网络，MAC地址是硬件实现的，每一个网卡在出厂时都会将全世界唯一的MAC地址固化在ROM中，因此MAC不可改，IP可改

* **主要功能不同：**
  交换机主要用于组建局域网。
  而路由主要功能是将由交换机组好的局域网相互连接起来，或者接入Internet。
  
  路由器可以给局域网自动分配IP，虚拟拨号。交换机则只是用来分配网络数据的。 
  
  路由器可以把一个IP分配给很多个主机使用，这些主机对外只表现出一个IP。交换机可以把很多主机连起来，这些主机对外各有各的IP。

  交换机分割冲突域，但不分割广播域，而路由器分割广播域。
  路由还可以提供防火墙的功能。
  路由配置比交换机复杂。
  
* **冲突域和广播域**

  > 由交换机连接的网段，仍属于同一个广播域，广播数据包会在交换机连接的所有网段上传播，这时会导致广播风暴和安全漏洞。而连接在路由器上的网段会被分配到不同的广播域。路由器不会转发广播数据。交换机会转发广播数据给局域网中的所有主机，值得说明的是单播的数据包在局域网中会被交换机唯一的送到目标主机，其他主机不会接受到数据，这是区别于原始的集线器的。

* **价格不同**

  交换机是看门大爷，路由是邮差